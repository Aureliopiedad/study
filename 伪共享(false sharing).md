# 伪共享(false sharing)说明

## 介绍

缓存系统中以缓存行(cache line)为单位存储，当多线程修改互相独立的变量时，如果这些变量共享同一个缓存行，就会影响彼此的性能，这就是伪共享。

## 前期知识提要

### CPU缓存

CPU缓存是位于CPU和内存之间的临时存储器，分为三个等级，分别是：

- L1，最小但是最快的缓存，每个core都有自己的L1缓存；能存储2kb到64kb
- L2，略大也略慢，每个core都有自己的L2缓存；能存储256kb到512kb
- L3，也被叫做末级缓存(last level cache)，位于CPU外部，被所有core共享。主要作用于数据共享和core之间通信；通常在1mb到8mb之间

### MESI协议

