# b树 b+树

## b树

b树是一种自平衡树形结构，通常m阶的b树，必须满足：

- 每个节点最多有m个子节点
- 每个非叶子节点(除了根节点)具有至少m/2个子节点
- 如果根不是叶节点，则根至少有两个子节点
- 具有k个节点的非叶子节点，必须包含k-1个元素，且元素升序
- 所有叶子节点都出现在同一个水平上，高度一致且没有信息

### b树的阶

b树中的一个节点的子节点数目的最大值，就是b树的阶。

### b树的根

如果根节点不是叶子节点，那么必须有两个或以上的子节点。根节点拥有的子节点数量上限和内部节点相同。

### b树的内部节点

除叶子节点和根节点之外的节点，拥有父节点和子节点的节点，是内部节点。

### b树的插入

和二叉查询树差不多，b树的数据插入总会插入到叶子节点，但是受限于m阶的b树每个节点最多只能包含m-1个元素，当某个节点的元素超过限制时，就需要将该节点分裂。

节点分裂的过程大致如下：

1. 从该节点已存在的元素中，选择一个中间的元素，记录左侧的元素和右侧的元素
2. 中间元素向上进入父节点，同时，可能引起父节点的分裂
3. 递归执行后，如果根节点需要分裂，那么就创建一个新的根节点(增加了树的高度)，意味着根节点最少有两个子节点

### b树的删除

一般来说，b树的删除遵循两个思路：

1. 定位并删除元素，然后调整树来满足约束状态
2. 从上到下处理，在进入某个节点前，调整树使得之后一旦遇到了要删除的元素，可以被直接删除而不需要进行调整

先说第一种删除策略：

1. 被删除的元素所在的节点是否是叶子节点
   1. 如果是叶子节点，则判断该节点剩余元素是否大于m/2个，如果大于，直接删除；如果不大于
   2. 如果不是叶子节点，则从子节点中选择相近元素补充上去，并将这个相近元素删除
2. 